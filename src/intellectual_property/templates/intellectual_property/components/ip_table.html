{% load static %}
{% load common_tags %}

<div class="mb-3">
  <button class="btn btn-sm btn-outline-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#columnSelector"><i class="bi bi-layout-three-columns me-1"></i>Настройка колонок</button>
</div>

<div class="collapse mb-3" id="columnSelector">
  <div class="card card-body bg-light">
    <div class="row g-2" id="columnToggle">
      <div class="col-md-3">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="type" id="colType" checked />
          <label class="form-check-label" for="colType">Вид РИД</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="name" id="colName" checked />
          <label class="form-check-label" for="colName">Наименование</label>
        </div>
      </div>
      <!-- Добавьте остальные колонки по аналогии -->
    </div>
  </div>
</div>

<div class="table-responsive">
  <table class="table table-sm table-hover align-middle mb-0" id="ipTable" style="font-size: 0.85rem;">
    <thead class="table-light">
      <tr>
        <th data-column="type">Вид РИД</th>
        <th data-column="name">Наименование РИД</th>
        <th data-column="year">Год</th>
        <th data-column="regDate">Дата рег.</th>
        <th data-column="owners">Правообладатели</th>
        <th data-column="rightsRF">Права РФ</th>
        <th data-column="docType">Вид док.</th>
        <th data-column="docNumber">Номер док.</th>
        <th data-column="docDate">Дата док.</th>
        <th data-column="appDate">Дата заявки</th>
        <th data-column="authors">Авторы</th>
        <th data-column="secret">Секретность</th>
        <th data-column="licensees">Лицензиаты</th>
        <th data-column="abstract">Реферат</th>
        <th data-column="contacts">Контакты</th>
        <th data-column="status">Статус</th>
        <th data-column="statusDate">Дата статуса</th>
        <th data-column="lang">Языки</th>
        <th data-column="db">СУБД</th>
        <th data-column="volume">Объем</th>
        <th data-column="claims">Формула</th>
        <th data-column="cited">Цитируемые</th>
        <th data-column="expiry">Срок</th>
      </tr>
    </thead>
    <tbody>
      {% for ip in ip_objects %}
        {% include 'intellectual_property/components/ip_table_row.html' with ip=ip %}
      {% empty %}
        <tr>
          <td colspan="23" class="text-center text-muted py-4">
            <i class="bi bi-inbox me-2"></i>Записей не найдено
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% block extra_js %}
  <script src="{% static 'intellectual_property/js/ip_table.js' %}"></script>
{% endblock %}
